# yapapi.rest.payment

## Classes

### Allocation

```text
class Allocation(
    _api: ya_payment.api.requestor_api.RequestorApi,
    id: str,
    amount: decimal.Decimal,
    expires: Union[datetime.datetime, NoneType]
)
```

Payment reservation for task processing.

#### Ancestors \(in MRO\)

* yapapi.rest.payment.\_Link

#### Methods

#### delete

```text
def delete(
    self
)
```

#### details

```text
def details(
    self
) -> yapapi.rest.payment.AllocationDetails
```

### AllocationDetails

```text
class AllocationDetails(
    spent_amount: decimal.Decimal,
    remaining_amount: decimal.Decimal
)
```

AllocationDetails\(spent\_amount: decimal.Decimal, remaining\_amount: decimal.Decimal\)

### Invoice

```text
class Invoice(
    _api: ya_payment.api.requestor_api.RequestorApi,
    _base: ya_payment.models.invoice.Invoice
)
```

NOTE: This class is auto generated by OpenAPI Generator. Ref: [https://openapi-generator.tech](https://openapi-generator.tech)

Do not edit the class manually.

#### Ancestors \(in MRO\)

* ya\_payment.models.invoice.Invoice

#### Class variables

```text
attribute_map
```

```text
openapi_types
```

#### Instance variables

```text
activity_ids
```

Gets the activity\_ids of this Invoice. \# noqa: E501

:return: The activity\_ids of this Invoice. \# noqa: E501 :rtype: list\[str\]

```text
agreement_id
```

Gets the agreement\_id of this Invoice. \# noqa: E501

:return: The agreement\_id of this Invoice. \# noqa: E501 :rtype: str

```text
amount
```

Gets the amount of this Invoice. \# noqa: E501

:return: The amount of this Invoice. \# noqa: E501 :rtype: str

```text
invoice_id
```

Gets the invoice\_id of this Invoice. \# noqa: E501

:return: The invoice\_id of this Invoice. \# noqa: E501 :rtype: str

```text
issuer_id
```

Gets the issuer\_id of this Invoice. \# noqa: E501

:return: The issuer\_id of this Invoice. \# noqa: E501 :rtype: str

```text
last_debit_note_id
```

Gets the last\_debit\_note\_id of this Invoice. \# noqa: E501

:return: The last\_debit\_note\_id of this Invoice. \# noqa: E501 :rtype: str

```text
payee_addr
```

Gets the payee\_addr of this Invoice. \# noqa: E501

:return: The payee\_addr of this Invoice. \# noqa: E501 :rtype: str

```text
payer_addr
```

Gets the payer\_addr of this Invoice. \# noqa: E501

:return: The payer\_addr of this Invoice. \# noqa: E501 :rtype: str

```text
payment_due_date
```

Gets the payment\_due\_date of this Invoice. \# noqa: E501

:return: The payment\_due\_date of this Invoice. \# noqa: E501 :rtype: datetime

```text
recipient_id
```

Gets the recipient\_id of this Invoice. \# noqa: E501

:return: The recipient\_id of this Invoice. \# noqa: E501 :rtype: str

```text
status
```

Gets the status of this Invoice. \# noqa: E501

:return: The status of this Invoice. \# noqa: E501 :rtype: InvoiceStatus

```text
timestamp
```

Gets the timestamp of this Invoice. \# noqa: E501

:return: The timestamp of this Invoice. \# noqa: E501 :rtype: datetime

#### Methods

#### accept

```text
def accept(
    self,
    *,
    amount: Union[decimal.Decimal, str],
    allocation: 'Allocation'
)
```

#### to\_dict

```text
def to_dict(
    self
)
```

Returns the model properties as a dict

#### to\_str

```text
def to_str(
    self
)
```

Returns the string representation of the model

### InvoiceStatus

```text
class InvoiceStatus(
    local_vars_configuration=None
)
```

NOTE: This class is auto generated by OpenAPI Generator. Ref: [https://openapi-generator.tech](https://openapi-generator.tech)

Do not edit the class manually.

#### Class variables

```text
ACCEPTED
```

```text
CANCELLED
```

```text
FAILED
```

```text
ISSUED
```

```text
RECEIVED
```

```text
REJECTED
```

```text
SETTLED
```

```text
allowable_values
```

Attributes: openapi\_types \(dict\): The key is attribute name and the value is attribute type. attribute\_map \(dict\): The key is attribute name and the value is json key in definition.

```text
attribute_map
```

```text
openapi_types
```

#### Methods

#### to\_dict

```text
def to_dict(
    self
)
```

Returns the model properties as a dict

#### to\_str

```text
def to_str(
    self
)
```

Returns the string representation of the model

### Payment

```text
class Payment(
    api_client: ya_payment.api_client.ApiClient
)
```

#### Methods

#### allocation

```text
def allocation(
    self,
    allocation_id: str
) -> yapapi.rest.payment.Allocation
```

#### allocations

```text
def allocations(
    self
) -> AsyncIterator[yapapi.rest.payment.Allocation]
```

Lists all active allocations.

Example:

Listing all active allocations

```text
from yapapi import rest

async def list_allocations(payment_api: rest.Payment):
    async for allocation in payment_api.allocations():
        print(f'''allocation: {allocation.id}
            amount={allocation.amount},
            expires={allocation.expires}''')
```

#### incoming\_invoices

```text
def incoming_invoices(
    self
) -> AsyncIterator[yapapi.rest.payment.Invoice]
```

#### invoice

```text
def invoice(
    self,
    invoice_id: str
) -> yapapi.rest.payment.Invoice
```

#### invoices

```text
def invoices(
    self
) -> AsyncIterator[yapapi.rest.payment.Invoice]
```

#### new\_allocation

```text
def new_allocation(
    self,
    amount: decimal.Decimal,
    *,
    expires: Union[datetime.datetime, NoneType] = None,
    make_deposit: bool = False
) -> yapapi.rest.resource.ResourceCtx[yapapi.rest.payment.Allocation]
```

Creates new allocation.

* `amount`:  Allocation amount.
* `expires`: expiration timestamp. by default 30 minutes from now.
* `make_deposit`: \(unimplemented\).

